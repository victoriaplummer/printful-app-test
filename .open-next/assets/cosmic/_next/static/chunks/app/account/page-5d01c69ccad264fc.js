(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[298],{296:(e,s,n)=>{"use strict";n.r(s),n.d(s,{default:()=>d});var c=n(5155),a=n(2108),r=n(2115),l=n(5695),i=n(4477);let t=(0,i.createServerReference)("40312b2ba6c159dc236d1f0b07b464460da33524c5",i.callServer,void 0,i.findSourceMapURL,"disconnectProvider");function d(){var e;let{data:s,status:n,update:i}=(0,a.useSession)(),d=(0,l.useRouter)();(0,r.useEffect)(()=>{"unauthenticated"===n&&d.push("/")},[n,d]);let o=async e=>{try{console.log("Signing in with ".concat(e,"...")),await (0,a.signIn)(e,{redirect:!0,callbackUrl:"/account"})}catch(s){console.error("Error signing in with ".concat(e,":"),s),alert("Failed to connect to ".concat(e,". Please try again."))}},u=async e=>{confirm("Are you sure you want to disconnect from ".concat(e,"?"))&&(await t(e),i())};return"loading"===n?(0,c.jsx)("div",{className:"flex min-h-screen flex-col",children:(0,c.jsx)("main",{className:"flex-1 p-4",children:(0,c.jsx)("div",{className:"max-w-lg mx-auto",children:(0,c.jsx)("div",{className:"flex justify-center items-center h-32",children:(0,c.jsx)("span",{className:"loading loading-spinner loading-lg text-primary"})})})})}):(0,c.jsx)("div",{className:"flex min-h-screen flex-col",children:(0,c.jsx)("main",{className:"flex-1 p-4",children:(0,c.jsx)("div",{className:"max-w-lg mx-auto",children:(0,c.jsx)("div",{className:"card bg-base-100 shadow",children:(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsx)("h2",{className:"card-title",children:"Your Account"}),s?(0,c.jsxs)("div",{children:[(0,c.jsxs)("p",{children:["Signed in as ",(null===(e=s.user)||void 0===e?void 0:e.email)||"User"]}),(0,c.jsx)("div",{className:"divider"}),(0,c.jsx)("h3",{className:"font-bold mb-2",children:"Connected Services"}),(0,c.jsx)("div",{className:"card bg-base-200 mb-4",children:(0,c.jsxs)("div",{className:"card-body p-4",children:[(0,c.jsx)("h3",{className:"card-title text-base",children:"Printful"}),s.printfulAccessToken?(0,c.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,c.jsx)("div",{className:"badge badge-success",children:"Connected"}),(0,c.jsx)("button",{onClick:()=>u("printful"),className:"btn btn-sm btn-error",children:"Disconnect"})]}):(0,c.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,c.jsx)("div",{className:"badge badge-error",children:"Not Connected"}),(0,c.jsx)("button",{onClick:()=>o("printful"),className:"btn btn-sm btn-primary",children:"Connect"})]})]})}),(0,c.jsx)("div",{className:"card bg-base-200",children:(0,c.jsxs)("div",{className:"card-body p-4",children:[(0,c.jsx)("h3",{className:"card-title text-base",children:"Webflow"}),s.webflowAccessToken?(0,c.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,c.jsx)("div",{className:"badge badge-success",children:"Connected"}),(0,c.jsx)("button",{onClick:()=>u("webflow"),className:"btn btn-sm btn-error",children:"Disconnect"})]}):(0,c.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,c.jsx)("div",{className:"badge badge-error",children:"Not Connected"}),(0,c.jsx)("button",{onClick:()=>o("webflow"),className:"btn btn-sm btn-primary",children:"Connect"})]})]})})]}):(0,c.jsxs)("div",{className:"flex flex-col items-center gap-4 py-4",children:[(0,c.jsx)("p",{children:"You are not signed in."}),(0,c.jsx)("button",{onClick:()=>(0,a.signIn)(),className:"btn btn-primary",children:"Sign In"})]})]})})})})})}},4477:(e,s,n)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),!function(e,s){for(var n in s)Object.defineProperty(e,n,{enumerable:!0,get:s[n]})}(s,{callServer:function(){return c.callServer},createServerReference:function(){return r},findSourceMapURL:function(){return a.findSourceMapURL}});let c=n(3806),a=n(1818),r=n(4979).createServerReference},4804:(e,s,n)=>{Promise.resolve().then(n.bind(n,296))},5695:(e,s,n)=>{"use strict";var c=n(8999);n.o(c,"usePathname")&&n.d(s,{usePathname:function(){return c.usePathname}}),n.o(c,"useRouter")&&n.d(s,{useRouter:function(){return c.useRouter}})}},e=>{var s=s=>e(e.s=s);e.O(0,[108,441,684,358],()=>s(4804)),_N_E=e.O()}]);