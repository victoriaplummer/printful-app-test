(()=>{var e={};e.id=39,e.ids=[39],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},71648:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>v,routeModule:()=>d,serverHooks:()=>h,workAsyncStorage:()=>x,workUnitAsyncStorage:()=>w});var s={};t.r(s),t.d(s,{GET:()=>l});var o=t(96559),n=t(48088),a=t(37719),i=t(32190),c=t(22563);let u=()=>{if(!process.env.WEBFLOW_CLIENT_ID||!process.env.WEBFLOW_CLIENT_SECRET||!process.env.WEBFLOW_REDIRECT_URI)throw Error("Missing Webflow environment variables")},p=async e=>{u();try{return await c.WebflowClient.getAccessToken({clientId:process.env.WEBFLOW_CLIENT_ID,clientSecret:process.env.WEBFLOW_CLIENT_SECRET,code:e})}catch(e){throw console.error("Error getting Webflow access token:",e),e}};async function l(e){let{searchParams:r}=new URL(e.url),t=r.get("code"),s=r.get("error"),o=r.get("state");if(s)return i.NextResponse.redirect(`/auth-error?error=${encodeURIComponent(s)}`);if(!t)return i.NextResponse.redirect(`/auth-error?error=${encodeURIComponent("No code provided")}`);if("webflow-auth-state"!==o)return i.NextResponse.redirect(`/auth-error?error=${encodeURIComponent("Invalid state")}`);try{let e=await p(t),r=i.NextResponse.redirect("/dashboard");return r.cookies.set("webflow_access_token",e,{httpOnly:!0,secure:!0,sameSite:"lax",maxAge:604800}),r}catch(e){return console.error("Error in Webflow callback:",e),i.NextResponse.redirect(`/auth-error?error=${encodeURIComponent("Failed to get access token")}`)}}let d=new o.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/auth/webflow/callback/route",pathname:"/api/auth/webflow/callback",filename:"route",bundlePath:"app/api/auth/webflow/callback/route"},resolvedPagePath:"/Users/vicplummer/printful-app-test/src/app/api/auth/webflow/callback/route.ts",nextConfigOutput:"standalone",userland:s}),{workAsyncStorage:x,workUnitAsyncStorage:w,serverHooks:h}=d;function v(){return(0,a.patchFetch)({workAsyncStorage:x,workUnitAsyncStorage:w})}},74075:e=>{"use strict";e.exports=require("zlib")},78335:()=>{},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},96487:()=>{}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[243,580,563],()=>t(71648));module.exports=s})();